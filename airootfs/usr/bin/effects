#!/bin/sh

case $1 in
	init)
		echo '{"tooltip":"Left click: blur\nRight click: fire"}'
		;;
	fire)
		grep 'close_animation = fire' $HOME/.wayfire.conf >/dev/null 2>&1
		if (($? > 0)); then # not done already
			cat >>$HOME/.wayfire.conf<<EOF
[animate]
close_animation = fire
EOF
		else
			sed -i 's/\[animate\]//' $HOME/.wayfire.conf
			sed -i 's/close_animation = fire//' $HOME/.wayfire.conf
		fi
		;;
	blur)
		grep 'blur \\' $HOME/.wayfire.conf >/dev/null 2>&1
		if (($? > 0)); then # not done already
			sed -i 's/autostart \\/autostart \\\
		blur \\/' $HOME/.wayfire.conf
			dconf write /com/gexperts/Tilix/profiles/2b7c4080-0ddd-46c5-8f23-563fd3ba789d/background-transparency-percent 50
		else
			sed -i '/blur \\/{N;s/blur \\\n//}' $HOME/.wayfire.conf
			dconf write /com/gexperts/Tilix/profiles/2b7c4080-0ddd-46c5-8f23-563fd3ba789d/background-transparency-percent 0
		fi
		;;
	*)
		echo what
		exit 1
		;;
esac

